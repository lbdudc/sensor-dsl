CREATE PRODUCT intecmar USING 4326;

// DIMENSIONS

CREATE SPATIAL DIMENSION Estuary (
		geometry: Polygon
) WITH PROPERTIES (
		shortName String DISPLAY_STRING,
		name String,
		zone String
);

CREATE CATEGORICAL DIMENSION Depth (
	field: depth
);

// RANGES

CREATE RANGE DepthRange (
  0 TO 3 AS "surface",
	4.75 TO 5.25 AS "5m",
  9.75 TO 10.25 AS "10m",
  14.75 TO 15.25 AS "15m",
  19.75 TO 20.25 AS "20m"
);

// SENSORS

CREATE SENSOR StationObservation (
  interval: 500,
  datasource: elasticsearch,
  geometry: Point
) WITH PROPERTIES (
  maxDepth Float,
  code String,
  name String,
  description String,
  startTime Datetime,
  endTime Datetime
) WITH MEASUREMENT DATA (
  temperature_ITS90 Double UNITS "ÂºC" ICON "thermometer-low" RANGE TempRange,
  salinity Double UNITS "PSU",
  pressure Double UNITS "dbar" ICON "speedometer",
  ph Double UNITS "pH" ICON "ph",
  oxygen Double UNITS "mg/l" ICON "gas-cylinder",
  transmittance Double UNITS "m",
  irradiance Double UNITS "W/m2",
  uv_flourescence Double UNITS "mg/m3",
  density Double UNITS "kg/m3",
  conductivity Double UNITS "S/m"
) WITH SPATIAL DIMENSIONS Estuary (
  Estuary
) WITH CATEGORICAL DIMENSIONS (
  Depth RANGE DepthRange
) WITH BBOX ([40.42, -3.7], 12);

  
